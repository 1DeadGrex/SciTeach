<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Materials | Science Hub</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://css.gg/css' rel='stylesheet'>
</head>
<body>
     <div class="glow-container"></div>

    <div class="container">
        <header class="page-header">
            <a href="index.html" class="simple-back-btn">
                <i class="gg-arrow-left"></i> Back Home
            </a>
            <h1 style="font-size: 2.5rem; margin-top: 1rem;">
                Study <span class="text-red">Materials</span>
            </h1>
            <p class="text-muted">Choose a category below to browse available materials.</p>
            
            <!-- Progress Indicator -->
            <div class="glass-panel" style="margin-top: 1.5rem; padding: 1rem; display: flex; align-items: center; gap: 1rem;">
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                        <span class="text-muted" style="font-size: 0.9rem;">Your Progress</span>
                        <span class="text-red" style="font-weight: 600; font-size: 0.9rem;" id="progressPercentage">0%</span>
                    </div>
                    <div style="height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden;">
                        <div id="progressBar" style="height: 100%; background: var(--primary-red); width: 0%; transition: width 0.5s ease;"></div>
                    </div>
                </div>
                <button class="btn btn-glass" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="clearHistory()">
                    <i class="gg-undo"></i> Reset
                </button>
            </div>
        </header>

        <!-- Categories Grid -->
        <div class="card-grid">
            <!-- PDFs & E-Books -->
            <a href="pdfs.html" class="card-link" id="pdfsLink">
                <div class="glass-panel material-card">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <i class="gg-file-document card-icon"></i>
                        <span class="text-muted" style="font-size: 0.8rem; background: var(--primary-red-dim); padding: 0.2rem 0.6rem; border-radius: 10px;">
                            <i class="gg-trending" style="font-size: 0.7rem; margin-right: 0.3rem;"></i> Most Popular
                        </span>
                    </div>
                    <h3 class="card-title">PDFs & E-Books</h3>
                    <p class="card-desc">Downloadable textbooks, research papers, and reference guides for all levels.</p>
                    <div class="text-muted" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 1rem; font-size: 0.85rem;">
                        <i class="gg-file"></i>
                        <span>150+ Resources</span>
                        <span style="margin-left: auto;">→</span>
                    </div>
                </div>
            </a>

            <!-- Handwritten Notes -->
            <a href="notes.html" class="card-link" id="notesLink">
                <div class="glass-panel material-card">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <i class="gg-pen card-icon" style="--ggs: 1.2"></i>
                        <span class="text-muted" style="font-size: 0.8rem; background: var(--primary-red-dim); padding: 0.2rem 0.6rem; border-radius: 10px;">
                            <i class="gg-star" style="font-size: 0.7rem; margin-right: 0.3rem;"></i> Student Choice
                        </span>
                    </div>
                    <h3 class="card-title">Handwritten Notes</h3>
                    <p class="card-desc">Clean, concise notes shared by top students and professors across universities.</p>
                    <div class="text-muted" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 1rem; font-size: 0.85rem;">
                        <i class="gg-pen"></i>
                        <span>80+ Collections</span>
                        <span style="margin-left: auto;">→</span>
                    </div>
                </div>
            </a>

            <!-- YT Video Lectures -->
            <a href="video.html" class="card-link" id="videosLink">
                <div class="glass-panel material-card">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <i class="gg-youtube card-icon"></i>
                        <span class="text-muted" style="font-size: 0.8rem; background: var(--primary-red-dim); padding: 0.2rem 0.6rem; border-radius: 10px;">
                            <i class="gg-play-button-o" style="font-size: 0.7rem; margin-right: 0.3rem;"></i> Free Video
                        </span>
                    </div>
                    <h3 class="card-title">YT Video Lectures</h3>
                    <p class="card-desc">Curated playlists specifically organized by topic, difficulty, and syllabus.</p>
                    <div class="text-muted" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 1rem; font-size: 0.85rem;">
                        <i class="gg-play-button-o"></i>
                        <span>300+ Hours</span>
                        <span style="margin-left: auto;">→</span>
                    </div>
                </div>
            </a>

            <!-- Free Courses -->
            <a href="courses.html" class="card-link" id="coursesLink">
                <div class="glass-panel material-card">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <i class="gg-lee-u card-icon"></i>
                        <span class="text-muted" style="font-size: 0.8rem; background: var(--primary-red-dim); padding: 0.2rem 0.6rem; border-radius: 10px;">
                            <i class="gg-university" style="font-size: 0.7rem; margin-right: 0.3rem;"></i> University
                        </span>
                    </div>
                    <h3 class="card-title">Free Courses</h3>
                    <p class="card-desc">Links to comprehensive free courseware from top universities (MIT OCW, etc.).</p>
                    <div class="text-muted" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 1rem; font-size: 0.85rem;">
                        <i class="gg-university"></i>
                        <span>40+ Courses</span>
                        <span style="margin-left: auto;">→</span>
                    </div>
                </div>
            </a>
        </div>

        <!-- Recent Activity Section -->
        <div class="glass-panel history-panel">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                <h4 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                    <i class="gg-time" style="color: var(--primary-red)"></i> 
                    Your Recent Activity
                </h4>
                <span class="text-muted" style="font-size: 0.8rem;" id="historyCount">0 items</span>
            </div>
            <div id="history-container" class="history-list">
                <p class="text-muted">No recent activity yet. Start exploring!</p>
            </div>
            <p class="text-muted" style="margin-top: 1rem; font-size: 0.85rem; text-align: center;">
                Click on any activity to resume where you left off
            </p>
        </div>

        <!-- Quick Stats -->
        <div class="glass-panel" style="margin-top: 2rem; padding: 1.5rem;">
            <h4 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="gg-chart text-red"></i> Your Learning Stats
            </h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                <div style="text-align: center;">
                    <div class="text-red" style="font-size: 2rem; font-weight: 700;" id="visitedCount">0</div>
                    <div class="text-muted" style="font-size: 0.85rem;">Categories Visited</div>
                </div>
                <div style="text-align: center;">
                    <div class="text-red" style="font-size: 2rem; font-weight: 700;" id="resumeCount">0</div>
                    <div class="text-muted" style="font-size: 0.85rem;">Resume Points</div>
                </div>
                <div style="text-align: center;">
                    <div class="text-red" style="font-size: 2rem; font-weight: 700;" id="daysActive">0</div>
                    <div class="text-muted" style="font-size: 0.85rem;">Days Active</div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        © 2025 Science Hub. All rights reserved.
    </footer>

    <script src="script.js"></script>
    <script>
        // Enhanced history functionality for materials page
        document.addEventListener('DOMContentLoaded', function() {
            // First, load the initial history
            loadHistory();
            
            // Calculate and display user stats
            function updateUserStats() {
                const history = JSON.parse(localStorage.getItem('scienceHubHistory')) || [];
                
                // Count different categories
                const categories = ['PDFs & E-Books', 'Handwritten Notes', 'YT Video Lectures', 'Free Courses'];
                const visitedCategories = new Set();
                let resumeCount = 0;
                
                history.forEach(item => {
                    if (item.type === 'resume') resumeCount++;
                    
                    // Check if this matches any category
                    categories.forEach(cat => {
                        if (item.name.includes(cat) || cat.includes(item.name)) {
                            visitedCategories.add(cat);
                        }
                    });
                });
                
                // Update stats display
                document.getElementById('visitedCount').textContent = visitedCategories.size;
                document.getElementById('resumeCount').textContent = resumeCount;
                document.getElementById('historyCount').textContent = `${history.length} items`;
                
                // Calculate days active (simplified)
                if (history.length > 0) {
                    const firstDate = new Date(history[history.length - 1].timestamp);
                    const today = new Date();
                    const diffTime = Math.abs(today - firstDate);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    document.getElementById('daysActive').textContent = Math.min(diffDays, history.length);
                }
                
                // Update progress bar
                const progressPercentage = Math.min((visitedCategories.size / categories.length) * 100, 100);
                document.getElementById('progressBar').style.width = `${progressPercentage}%`;
                document.getElementById('progressPercentage').textContent = `${Math.round(progressPercentage)}%`;
            }
            
            // Make history tags clickable
            function makeHistoryTagsClickable() {
                const historyTags = document.querySelectorAll('.history-tag');
                historyTags.forEach(tag => {
                    tag.style.cursor = 'pointer';
                    tag.addEventListener('click', function() {
                        const text = this.textContent || this.innerText;
                        
                        // Map history items to URLs
                        const urlMap = {
                            'PDFs & E-Books': 'pdfs.html',
                            'Handwritten Notes': 'notes.html',
                            'YT Video Lectures': 'video.html',
                            'Free Courses': 'courses.html',
                            'Main Menu': 'materials.html'
                        };
                        
                        // Find matching URL
                        for (const [key, url] of Object.entries(urlMap)) {
                            if (text.includes(key)) {
                                // Track as resume
                                if (typeof trackHistory === 'function') {
                                    trackHistory(key, true);
                                }
                                // Navigate after a short delay
                                setTimeout(() => {
                                    window.location.href = url;
                                }, 300);
                                break;
                            }
                        }
                    });
                });
            }
            
            // Initialize card links tracking
            function initCardLinksTracking() {
                const cardLinks = document.querySelectorAll('.card-link');
                cardLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        // Find the card title
                        const cardElement = this.querySelector('.material-card');
                        if (cardElement) {
                            const cardTitleElement = cardElement.querySelector('.card-title');
                            if (cardTitleElement) {
                                const cardTitle = cardTitleElement.textContent;
                                if (typeof trackHistory === 'function') {
                                    trackHistory(cardTitle);
                                }
                            }
                        }
                    });
                });
            }
            
            // Initialize
            updateUserStats();
            makeHistoryTagsClickable();
            initCardLinksTracking();
            
            // Function to clear history
            window.clearHistory = function() {
                localStorage.removeItem('scienceHubHistory');
                loadHistory();
                updateUserStats();
            };
        });
        
        // Global function to load history (also used in script.js)
        function loadHistory() {
            const historyContainer = document.getElementById('history-container');
            
            // Only run this if the container exists on the current page
            if (!historyContainer) return;
            
            const history = JSON.parse(localStorage.getItem('scienceHubHistory')) || [];
            
            if (history.length === 0) {
                historyContainer.innerHTML = '<p class="text-muted">No recent activity yet. Click "Get Started" to begin!</p>';
                return;
            }
            
            // Clear current content
            historyContainer.innerHTML = '';
            
            // Create tags for each history item
            history.forEach(item => {
                const tag = document.createElement('span');
                tag.className = 'history-tag';
                
                // Add icon based on type
                const icon = item.type === 'resume' ? 'gg-play-button-o' : 'gg-check-o';
                tag.innerHTML = `<i class="${icon}" style="margin-right: 5px; font-size: 0.9rem;"></i>`;
                
                // Add text (show "Resume" for resume type)
                const displayText = item.type === 'resume' ? `Resume: ${item.name}` : item.name;
                tag.innerHTML += displayText;
                
                historyContainer.appendChild(tag);
            });
            
            // Re-attach click handlers
            setTimeout(() => {
                document.querySelectorAll('.history-tag').forEach(tag => {
                    tag.style.cursor = 'pointer';
                    tag.addEventListener('click', function() {
                        const text = this.textContent || this.innerText;
                        
                        const urlMap = {
                            'PDFs & E-Books': 'pdfs.html',
                            'Handwritten Notes': 'notes.html',
                            'YT Video Lectures': 'video.html',
                            'Free Courses': 'courses.html',
                            'Main Menu': 'materials.html'
                        };
                        
                        for (const [key, url] of Object.entries(urlMap)) {
                            if (text.includes(key)) {
                                if (typeof trackHistory === 'function') {
                                    trackHistory(key, true);
                                }
                                setTimeout(() => {
                                    window.location.href = url;
                                }, 300);
                                break;
                            }
                        }
                    });
                });
            }, 100);
        }
    </script>
</body>
</html>